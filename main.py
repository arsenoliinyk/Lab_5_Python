import re

if __name__ == "__main__":
    count = 0
    # regex_start = r'\[08\/Mar\/2004\:07\:11\:37'
    # regex_end = r'\[10\/Mar\/2004\:11\:41\:52'
    file = "D:\\PyCharm programs\\Lab_5\\access_log"
    regex = r'\[((0[8-9])|10)\/Mar\/2004' \
            r'\:(?:0[7-9]|10|11)' \
            r'\:(?:(?!10)[1-3][0-9]|40|41)' \
            r'\:(?:3[7-9]|4\d|5[0-2])' \
            r'\ -0800] ".*" 200'

    # regex = r'\[((0[8-9])|10)\/Mar\/2004' \
    #         r'\:(?:(0[7-9])+(?!08\:)|10|11)' \
    #         r'\:(?:(?!10)[1-3][0-9]|40|41)' \
    #         r'\:(?:3[7-9]|4\d|5[0-2])' \
    #         r'\ -0800] ".*" 200'

    # regex = r'(\[(08\/Mar\/2004)\:((0(7\:((1((1\:3[7-9])|([2-9]\:[0-5][0-9])))|([2-5][0-9]\:[0-5][0-9])))|(8\:[0-5][0-9]\:[0-5][0-9])|(9\:[0-5][0-9]\:[0-5][0-9]))|(1[0-9]\:[0-5][0-9]\:[0-5][0-9])|(2[0-3]\:[0-5][0-9]\:[0-5][0-9]))\ -0800] ".*" 200)|' \


    with open(file, "r") as file:
        for line in file:
            for searched_number in re.finditer(regex, line):
                count += 1

    print("Successful number of requests = ", count)



